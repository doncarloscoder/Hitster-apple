<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hitster Apple</title>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #111;
  color: white;
  text-align: center;
  padding: 40px;
}
button {
  padding: 15px 25px;
  font-size: 18px;
  border-radius: 12px;
  border: none;
  background: #ff2d55;
  color: white;
}
input {
  padding: 10px;
  margin-top: 15px;
  border-radius: 8px;
  border: none;
  font-size: 16px;
}
</style>
</head>
<body>

<h1>ðŸŽµ Hitster Apple</h1>

<p id="status">Redo</p>

<input id="manualInput" placeholder="Kortnummer..." />
<br><br>
<button onclick="manualLookup()">Spela</button>

<script>

let mapping = {};

fetch("mapping.json")
  .then(r => r.json())
  .then(data => {
    mapping = data;
    checkUrl();
  });

function getCardFromUrl() {
  const params = new URLSearchParams(window.location.search);
  return params.get("card");
}

function checkUrl() {
  const card = getCardFromUrl();
  if (card && mapping[card]) {
    window.location.href = mapping[card];
  }
}

function manualLookup() {
  const card = document.getElementById("manualInput").value.trim();
  if (mapping[card]) {
    window.location.href = mapping[card];
  } else {
    alert("Kortet finns inte.");
  }
}

</script>

</body>
</html>
